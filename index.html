<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>アプリ「atsumeru」公式サイト</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@500&display=swap" rel="stylesheet">
    <style>
        /* 基本スタイル */
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; line-height: 1.8; margin: 0; color: #333; }
        .container { max-width: 800px; margin: 0 auto; padding: 20px; }
        section { padding: 60px 20px; }
        h2 { text-align: center; margin-bottom: 40px; font-size: 2em; }
    
        /* ヘッダー */
        header { text-align: center; padding: 60px 20px; background-color: #f8f9fa; }
        .app-title { display: flex; justify-content: center; align-items: center; gap: 20px; flex-wrap: wrap; }
        .app-icon { width: 80px; height: 80px; border-radius: 18px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        header h1 { font-size: 2.8em; margin: 0; }
        header p { font-size: 1.2em; color: #6c757d; margin-top: 10px; }
        .download-button { display: inline-block; background-color: #007bff; color: white; padding: 15px 30px; text-decoration: none; border-radius: 8px; font-weight: bold; margin-top: 20px; }
    
        /* 特徴セクション */
        .features { display: flex; justify-content: center; text-align: center; flex-wrap: wrap; gap: 30px; align-items: flex-start; }
        .feature-item { max-width: 240px; }
        .feature-item h3 { margin-bottom: 10px; }
        .feature-item p { font-size: 0.9em; color: #555; text-align: left;}
        .feature-item img { width: 100%; border-radius: 8px; border: 1px solid #ddd; margin-top: 15px; }
        
        /* アコーディオン（シリアルキー） */
        .group-title {
            font-size: 1.6em;
            margin-top: 20px;
            margin-bottom: 0;
            padding: 20px;
            border-bottom: 1px solid #eee; 
            cursor: pointer; 
            position: relative; 
            background-color: #f8f9fa; 
            border-radius: 8px 8px 0 0;
        }
        .group-title:first-of-type { margin-top: 0; }
        .group-title::after { content: '▼'; font-size: 0.8em; position: absolute; right: 20px; transition: transform 0.3s; }
        .group-title.active::after { transform: rotate(180deg); }
        .key-list-container { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-out; background-color: #fff; border-right: 1px solid #eee; border-left: 1px solid #eee; }
        .accordion-item { border-bottom: 1px solid #eee; }
        .accordion-item:last-child { border-bottom: none; }
        .accordion-title { padding: 20px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; font-size: 1.1em; font-weight: bold; }
        .accordion-title::after { content: '›'; font-size: 1.5em; transition: transform 0.3s; }
        .accordion-item.active .accordion-title::after { transform: rotate(90deg); }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; background-color: #f9f9f9; }
        .accordion-content-inner { padding: 20px; }
        .serial-key-code { background-color: #e9ecef; padding: 5px 10px; border-radius: 4px; font-family: monospace; }
        .tag { display: inline-block; background-color: #6c757d; color: white; padding: 2px 8px; font-size: 0.8em; border-radius: 10px; margin-right: 5px; }
    
        /* 申請フォーム */
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
        .form-group input, .form-group textarea, .form-group select { 
            width: 100%; 
            padding: 10px; 
            border: 1px solid #ccc; 
            border-radius: 4px; 
            font-size: 1em; 
            box-sizing: border-box;
        }
        .submit-button { display: block; width: 100%; padding: 15px; background-color: #28a745; color: white; border: none; border-radius: 8px; font-size: 1.2em; font-weight: bold; cursor: pointer; }
    
        /* フッター */
        footer { text-align: center; padding: 30px; background-color: #343a40; color: white; }
    </style>
</head>
<body>

    <header>
        <div class="app-title">
            <img src="images/atsumeru-app-icon.jpeg" alt="アプリアイコン" class="app-icon">
            <h1>atsumeru</h1>
        </div>
        <p>ダブルタップで簡単登録！直感的で簡単でありつつ柔軟な操作を実現！不便だったグッズの集計・管理を改革します！</p>
        <a href="（App Storeのリンク）" class="download-button">App Storeでダウンロード</a>
    </header>

    <div class="container">
        <section id="features">
            <h2>アプリの特徴</h2>
            <div class="features">
                <div class="feature-item">
                    <img src="images/MenuView.png" alt="MenuView.png">
                    <h3>階層的なデータ管理</h3>
                    <p>グループ、メンバー、シリーズ、種類の階層構造がどんな方法よりも優れたグッズ管理を実現します。</p>
                </div>
                <div class="feature-item">
                    <img src="images/ContentView_Series.png" alt="ContentView_Series.png">
                    <h3>片手でスムーズな集計</h3>
                    <p>数値入力やボタンに加え、ダブルタップでもカウントが可能に。スムーズで直感的な集計を実現します。</p>
                </div>
                <div class="feature-item">
                    <img src="images/ContentView_Member.png" alt="ContetView_Member.png">
                    <h3>2つの表示モード</h3>
                    <p>「シリーズごと」「メンバーごと」の表示をワンタップで変更可能。状況に応じて最適な管理を実現します。</p>
                </div>
                <div class="feature-item">
                    <img src="images/StoreView.png" alt="StoreView.png">
                    <h3>便利なApp内課金</h3>
                    <p>使い勝手を飛躍的に向上させる、タグ絞り込みやシリアルキー登録などの機能を追加できます。</p>
                </div>
                <div class="feature-item">
                    <img src="images/FilterView.png" alt="FilterView.png">
                    <h3>柔軟な絞り込みと検索</h3>
                    <p>タグ機能により、自分の思いのままに、より簡単な絞り込みが可能になります。</p>
                </div>
                <div class="feature-item">
                    <img src="images/AddSeriesView.png" alt="AddSeriesView.png">
                    <h3>シリーズ一括登録</h3>
                    <p>面倒なデータセットの作成も、シリアルキーの入力だけで一瞬で完了します。</p>
                </div>
            </div>
        </section>

        <section id="serial-keys">
            <h2>シリアルキー</h2>
            <div id="serial-key-groups">
                </div>
        </section>

        <section id="request-form">
            <h2>シリアルキー作成申請</h2>
            <p>欲しいシリーズやデータセットがあれば、こちらから作成を申請できます。</p>
            <form action="https://formspree.io/f/xkgzzarn" method="POST">
                <div class="form-group">
                    <label for="series-name">シリーズ名</label>
                    <input type="text" id="series-name" name="シリーズ名" required>
                </div>
                <div class="form-group">
                    <label for="element-type">要素の種類</label>
                    <input type="text" id="element-type" name="要素の種類" placeholder="例：ヨリ,チュウ,ヒキ" required>
                </div>
                <div class="form-group">
                    <label for="target-members">対象メンバー</label>
                    <textarea id="target-members" name="対象メンバー" rows="4" placeholder="例：メンバーA,メンバーB,メンバーC,メンバーD" required></textarea>
                </div>
                <button type="submit" class="submit-button">開発者に送信</button>
            </form>
        </section>

        <section id="feedback-form">
            <h2>ご意見・ご要望</h2>
            <p>アプリをより良くするための、ご意見、ご要望、不具合の報告などをお待ちしております。</p>
            
            <form action="https://formspree.io/f/mjkoodwo" method="POST">
                <div class="form-group">
                    <label for="feedback-type">お問い合わせの種類</label>
                    <select id="feedback-type" name="種類" style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 1em;">
                        <option value="ご意見・ご要望">ご意見・ご要望</option>
                        <option value="不具合の報告">不具合の報告</option>
                        <option value="その他">その他</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="feedback-details">内容</label>
                    <textarea id="feedback-details" name="内容" rows="6" required></textarea>
                </div>
                <button type="submit" class="submit-button">開発者に送信</button>
            </form>
        </section>

    </div>

    <footer>
        <p>&copy; 2025 Asahi Mizutani. All Rights Reserved.</p>
    </footer>

    <script>
        const accordionItems = document.querySelectorAll('.accordion-item');
        accordionItems.forEach(item => {
            const title = item.querySelector('.accordion-title');
            const content = item.querySelector('.accordion-content');
            title.addEventListener('click', () => {
                const isActive = item.classList.contains('active');
                accordionItems.forEach(i => {
                    i.classList.remove('active');
                    i.querySelector('.accordion-content').style.maxHeight = null;
                });
                if (!isActive) {
                    item.classList.add('active');
                    content.style.maxHeight = content.scrollHeight + 'px';
                }
            });
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            fetch('https://gist.githubusercontent.com/atsumeru-app/d6bf0f55160a04e6c80c2f74371ac2e4/raw/atsumeru_serialkeys.json')
                .then(response => response.json())
                .then(data => {
                    const accordionContainer = document.getElementById('serial-key-accordion');
                    if (!accordionContainer) return;
    
                    const allSeries = data.series; // 全シリーズのデータを取得
                    const allKeys = data.keys;     // 全キーのデータを取得
                        
                    const groupedKeys = {};
                    for (const serialKey in allKeys) {
                        const keyInfo = allKeys[serialKey];
                        const group = keyInfo.groupName || 'その他';
                        if (!groupedKeys[group]) {
                            groupedKeys[group] = [];
                        }
                        keyInfo.id = serialKey;
                        groupedKeys[group].push(keyInfo);
                    }

                    let htmlContent = '';
                    for (const groupName in groupedKeys) {
                        htmlContent += `<div class="group-container">`;
                        htmlContent += `<h3 class="group-title">${groupName}</h3>`;
                        htmlContent += `<div class="key-list-container">`;

                        groupedKeys[groupName].forEach(keyInfo => {
                            let seriesListHtml = '<ul>';
                            keyInfo.series_ids.forEach(seriesId => {
                                const seriesData = allSeries[seriesId];
                                if (seriesData) {
                                    seriesListHtml += `<li><strong>${seriesData.seriesName}</strong></li>`;
                                }
                            });
                            seriesListHtml += '</ul>';

                            htmlContent += `
                                <div class="accordion-item">
                                    <div class="accordion-title">${keyInfo.title}</div>
                                    <div class="accordion-content">
                                        <div class="accordion-content-inner">
                                            <p><strong>このキーで入手できるシリーズ:</strong></p>
                                            ${seriesListHtml}
                                            <hr>
                                            <p><strong>シリアルキー:</strong> <code class="serial-key-code">${keyInfo.id}</code></p>
                                        </div>
                                    </div>
                                </div>
                            `;
                        });
                        htmlContent += `</div></div>`; // .key-list-containerと.group-containerを閉じる
                    }

                    groupsContainer.innerHTML = htmlContent;
                    setupGroupToggles();
                    setupKeyAccordions();
                })
                .catch(error => console.error('シリアルキーの読み込みに失敗しました:', error));
        });

        // グループの開閉機能を設定する関数
        function setupGroupToggles() {
            const groupTitles = document.querySelectorAll('.group-title');
            groupTitles.forEach(title => {
                title.addEventListener('click', function() {
                    this.classList.toggle('active');
                    const keyList = this.nextElementSibling;
                    if (keyList.style.maxHeight) {
                        keyList.style.maxHeight = null;
                    } else {
                        keyList.style.maxHeight = keyList.scrollHeight + 'px';
                    }
                });
            });
        }

        // キー（アコーディオン）の開閉機能を設定する関数
        function setupKeyAccordions() {
            const accordionItems = document.querySelectorAll('.accordion-item');
            accordionItems.forEach(item => {
                const title = item.querySelector('.accordion-title');
                if (title) {
                    title.addEventListener('click', (event) => {
                        event.stopPropagation(); // 親のグループ開閉が反応しないようにする
                        const content = item.querySelector('.accordion-content');
                        
                        if (item.classList.contains('active')) {
                            item.classList.remove('active');
                            content.style.maxHeight = null;
                        } else {
                            item.classList.add('active');
                            content.style.maxHeight = content.scrollHeight + 'px';
                        }
                    });
                }
            });
        }
    </script>

</body>
</html>
